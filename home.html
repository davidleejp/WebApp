<html lang="ja">

<head>
    <title>作業一覧</title>
    <meta name="charset" content="UTF-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
    <div class="header">
        <div class="nav" style="display:none"><a href="javascript:void(0)">&lt;</a></div>
        <div class="title">今日の作業一覧</div>
    </div>
    <div class="content">
        <ul class="list" id="ul-worklist">
            <!-- <li>
                <div class="item">
                    <div></div>
                </div>
            </li> -->
        </ul>
    </div>
    <div class="footer"></div>
    <p align="center">
        <a href="./workdetail.html">詳細</a>
        &nbsp;&nbsp;
        <a href="./login.html">ログイン</a>
    </p>
    <script>
        $(function(){
            loadWorkList();
        });
        function loadWorkList() {
            let reqUrl = "./worklist.xhtml";
            $.getJSON(
                reqUrl,
                function (jsonData) {
                    if (jsonData || jsonData.length == 0) return;
                    let lstObj = $("#ul-worklist");
                    let html = "";
                    jsonData.forEach(detail => {
                        html = "<li><a href='./workdetail?id="+ detail.ID +"'>" + detail.Title + "</a></li>";
                        lstObj.append(html);
                    });
                    $("#div_worklist").html(jsonData.length);
                }
            )
        }
    </script>
</body>

</html>